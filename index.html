<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Book Viewer</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        html,body{
            height:100%;
            margin:0;
            background:#000;
        }
        body{
            display:flex;
            align-items:center;
            justify-content:center;
            outline:none;
        }
        img{
            margin:50px;
            box-sizing:border-box;
            max-width:calc(100vw - 100px);
            max-height:calc(100vh - 100px);
            -webkit-user-drag:none;
            user-select:none;
        }
        body.idle *{ cursor:none; }
    </style>
</head>
<body tabindex="0">
    <img id="pageImage" src="" alt="Page scan">

    <script>
        const pages = [
            "Assets/page-00.jpg",
            "Assets/page-01.jpg",
            "Assets/page-02.jpg",
            "Assets/page-03.jpg",
            "Assets/page-04.jpg",
            "Assets/page-05.jpg",
            "Assets/page-06.jpg",
            "Assets/page-07.jpg",
            "Assets/page-08.jpg",
            "Assets/page-09.jpg",
            "Assets/page-10.jpg"
        ];

        let current = 0;
        const img = document.getElementById("pageImage");

        function showPage() {
            img.src = pages[current];
        }

        function prevPage() {
            if (current > 0) {
                current--;
                showPage();
            }
        }

        function nextPage() {
            if (current < pages.length - 1) {
                current++;
                showPage();
            }
        }

        document.body.addEventListener("keydown", (e) => {
            if (e.key === "ArrowLeft") {
                prevPage();
            } else if (e.key === "ArrowRight") {
                nextPage();
            }
        });

        function handlePointerNavigation(clientX) {
            const half = window.innerWidth / 2;
            if (clientX < half) prevPage();
            else nextPage();
        }

        document.addEventListener("click", (e) => {
            if (e.button !== 0) return;
            handlePointerNavigation(e.clientX);
        });

        document.addEventListener("touchend", (e) => {
            const t = e.changedTouches[0];
            if (!t) return;
            handlePointerNavigation(t.clientX);
        }, {passive:true});

        window.addEventListener("load", () => {
            showPage();
            document.body.focus();
            let t;
            const idleClass = "idle";
            const resetIdle = () => {
                document.body.classList.remove(idleClass);
                clearTimeout(t);
                t = setTimeout(() => document.body.classList.add(idleClass), 1500);
            };
            document.addEventListener("mousemove", resetIdle, {passive:true});
            resetIdle();
        });
    </script>
</body>
</html>
